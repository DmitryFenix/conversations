# –†–µ–∑—é–º–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã Merge Requests

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –í—ã–±–æ—Ä –°–£–ë–î ‚úÖ

**–†–µ—à–µ–Ω–∏–µ: PostgreSQL**

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JSON/JSONB –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è diff –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ (tsvector/tsquery)
- –ò–Ω–¥–µ–∫—Å—ã GIN –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- –•–æ—Ä–æ—à–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Python

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω —Å–µ—Ä–≤–∏—Å PostgreSQL –≤ `docker-compose.yml`
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `api/mr_database.py` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î

### 2. –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ MR ‚úÖ

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã –º–µ—Ç—Ä–∏–∫–∏:**
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ: —Å–ª–æ–∂–Ω–æ—Å—Ç—å, —Ç–∏–ø –∏–∑–º–µ–Ω–µ–Ω–∏–π, —è–∑—ã–∫, –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –î–ª—è –æ—Ü–µ–Ω–∫–∏ –Ω–∞–≤—ã–∫–æ–≤: –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º, –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–≤—å—é
- –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è: beginner, intermediate, advanced

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `MR_METRICS.md` —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –º–µ—Ç—Ä–∏–∫
- –û–ø–∏—Å–∞–Ω—ã –∞–ª–≥–æ—Ä–∏—Ç–º—ã –æ—Ü–µ–Ω–∫–∏ –∏ –≤—ã–±–æ—Ä–∞ MR

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö ‚úÖ

**–°–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã:**
- `merge_requests` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ MR
- `mr_files` - –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —Ñ–∞–π–ª–∞–º
- `mr_comments` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ–≤—å—é
- `mr_metrics` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

**–ú–∏–≥—Ä–∞—Ü–∏—è:**
- –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `api/migrations/001_create_mr_tables.sql`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 4. –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ë–î ‚úÖ

**–°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã:**
- `scripts/collect_mrs.py` - —Å–±–æ—Ä MR –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
  - –ò–∑ –ª–æ–∫–∞–ª—å–Ω—ã—Ö git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
  - –ò–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö diff —Ñ–∞–π–ª–æ–≤ –≤ artifacts
  - –ê–Ω–∞–ª–∏–∑ –º–µ—Ç—Ä–∏–∫ –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
  
- `scripts/import_mrs.py` - –∏–º–ø–æ—Ä—Ç —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö MR –≤ PostgreSQL
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã ‚úÖ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `mr_id` –≤ —Ç–∞–±–ª–∏—Ü—É `sessions` (SQLite)
- –°–≤—è–∑—å –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏ –∏ MR

**–ù–æ–≤—ã–µ API endpoints:**
- `GET /api/mr/list` - —Å–ø–∏—Å–æ–∫ MR —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- `GET /api/mr/{mr_id}` - –¥–µ—Ç–∞–ª–∏ MR
- `GET /api/mr/{mr_id}/diff` - –ø–æ–ª—É—á–∏—Ç—å diff
- `GET /api/mr/{mr_id}/files` - —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
- `GET /api/mr/{mr_id}/comments` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- `GET /api/mr/search` - –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Å—Å–∏—è–º–∏:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `mr_id` –≤ –º–æ–¥–µ–ª—å `ReviewerSessionCreate`
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ —Å `mr_id` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è diff –∏–∑ MR
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ MR –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç `reviewer_get_session`

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **MR_SYSTEM_PLAN.md** - –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã
2. **MR_METRICS.md** - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
3. **api/migrations/001_create_mr_tables.sql** - SQL –º–∏–≥—Ä–∞—Ü–∏—è
4. **api/mr_database.py** - –ú–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL
5. **scripts/collect_mrs.py** - –°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∞ MR
6. **scripts/import_mrs.py** - –°–∫—Ä–∏–ø—Ç –∏–º–ø–æ—Ä—Ç–∞ MR
7. **MR_IMPLEMENTATION_SUMMARY.md** - –≠—Ç–æ—Ç —Ñ–∞–π–ª

## üîß –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **docker-compose.yml** - –¥–æ–±–∞–≤–ª–µ–Ω —Å–µ—Ä–≤–∏—Å PostgreSQL
2. **api/requirements.txt** - –¥–æ–±–∞–≤–ª–µ–Ω psycopg2-binary
3. **api/main.py** - –¥–æ–±–∞–≤–ª–µ–Ω—ã API endpoints –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MR

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### Merge Request
```json
{
  "id": 1,
  "external_id": "github_123",
  "title": "Fix security vulnerability",
  "description": "...",
  "language": "python",
  "difficulty_level": "intermediate",
  "change_type": "security",
  "complexity_score": 45.5,
  "files_changed": 3,
  "lines_added": 150,
  "lines_deleted": 20,
  "diff_content": "...",
  "tags": ["security", "bugfix"]
}
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL:**
   ```bash
   docker compose up -d postgres
   ```

2. **–°–æ–±—Ä–∞—Ç—å MR –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö:**
   ```bash
   python scripts/collect_mrs.py --artifacts ./artifacts --output mrs_collected.json
   ```

3. **–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å MR –≤ –ë–î:**
   ```bash
   python scripts/import_mrs.py mrs_collected.json
   ```

4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API:**
   ```bash
   curl http://localhost:8000/api/mr/list
   curl http://localhost:8000/api/mr/1
   ```

5. **–û–±–Ω–æ–≤–∏—Ç—å UI** –¥–ª—è –≤—ã–±–æ—Ä–∞ MR –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–∏

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ Docker –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SQLite (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è)
- –°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∞ MR –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å GitHub/GitLab API
- –ú–µ—Ç—Ä–∏–∫–∏ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å —Å –ø–æ–º–æ—â—å—é ML –º–æ–¥–µ–ª–µ–π





