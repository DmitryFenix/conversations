# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Gitea —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. API Endpoints –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Gitea

#### –°–æ–∑–¥–∞–Ω–∏–µ Pull Request
- **Endpoint**: `POST /api/reviewer/sessions/{session_id}/gitea/create-pr`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –°–æ–∑–¥–∞—ë—Ç Pull Request –≤ Gitea –¥–ª—è —Å–µ—Å—Å–∏–∏
- **–û—Ç–≤–µ—Ç**: 
  ```json
  {
    "status": "ok",
    "pr_id": 1,
    "pr_url": "http://localhost:4000/user/repo/pulls/1",
    "pr_data": {...}
  }
  ```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ Pull Request
- **Endpoint**: `GET /api/reviewer/sessions/{session_id}/gitea/pr`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ PR –∏–∑ Gitea (–¥–∞–Ω–Ω—ã–µ PR, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, diff)
- **–û—Ç–≤–µ—Ç**:
  ```json
  {
    "pr": {...},
    "comments": [...],
    "diff": "...",
    "pr_url": "..."
  }
  ```

#### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- **Endpoint**: `POST /api/reviewer/sessions/{session_id}/gitea/sync-comments`
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–∑ –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã –≤ Gitea PR
- **–û—Ç–≤–µ—Ç**:
  ```json
  {
    "status": "ok",
    "synced_count": 5,
    "total_count": 5,
    "errors": []
  }
  ```

### 2. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Reviewer Dashboard

#### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ Gitea –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- **–°–µ–∫—Ü–∏—è "Gitea Integration"** –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è, –µ—Å–ª–∏ Gitea –≤–∫–ª—é—á–µ–Ω –¥–ª—è —Å–µ—Å—Å–∏–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Gitea
  - –ò–º—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
  - Web URL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (—Å—Å—ã–ª–∫–∞)
  - –°—Ç–∞—Ç—É—Å Pull Request (–µ—Å–ª–∏ —Å–æ–∑–¥–∞–Ω)
  - –ö–Ω–æ–ø–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è PR

#### –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **"–°–æ–∑–¥–∞—Ç—å PR"** - —Å–æ–∑–¥–∞—ë—Ç Pull Request –≤ Gitea
- **"–û–±–Ω–æ–≤–∏—Ç—å PR"** - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ PR
- **"–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏"** - –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–∑ –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã –≤ Gitea PR

#### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ PR
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–æ–º–µ—Ä PR –∏ —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ–≥–æ
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å PR (open/closed/merged)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ PR
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏–µ PR (–ø–µ—Ä–≤—ã–µ 100 —Å–∏–º–≤–æ–ª–æ–≤)

### 3. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Candidate View

#### –°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –í header –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π" (–µ—Å–ª–∏ Gitea –≤–∫–ª—é—á–µ–Ω)
- –ö–Ω–æ–ø–∫–∞ –≤–µ–¥—ë—Ç –Ω–∞ Web URL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤ Gitea
- –°—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ —Å–∏–Ω–µ–º —Ü–≤–µ—Ç–µ —Å –∏–∫–æ–Ω–∫–æ–π GitBranch

## üîÑ Workflow –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ —Å Gitea

1. **Reviewer —Å–æ–∑–¥–∞—ë—Ç —Å–µ—Å—Å–∏—é** —á–µ—Ä–µ–∑ `/reviewer`
2. **–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**:
   - –°–æ–∑–¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Gitea: `candidate_{–∏–º—è_–∫–∞–Ω–¥–∏–¥–∞—Ç–∞}`
   - –°–æ–∑–¥–∞—ë—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `session_{session_id}`
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –∫–æ–¥ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ë–î

3. **Reviewer –≤–∏–¥–∏—Ç**:
   - –°–µ–∫—Ü–∏—é "Gitea Integration" —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
   - –ö–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å PR" (–µ—Å–ª–∏ PR –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–Ω)

### –†–∞–±–æ—Ç–∞ —Å Pull Request

1. **Reviewer –Ω–∞–∂–∏–º–∞–µ—Ç "–°–æ–∑–¥–∞—Ç—å PR"**
   - –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç Pull Request –≤ Gitea
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç PR ID –≤ –ë–î
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ PR

2. **Reviewer –º–æ–∂–µ—Ç**:
   - –û—Ç–∫—Ä—ã—Ç—å PR –≤ Gitea (—á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫—É)
   - –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ PR
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ PR

3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤**:
   - –í—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–∑ –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ Gitea PR
   - –ö–∞–∂–¥—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–∞–∫ review comment –≤ PR
   - –§–æ—Ä–º–∞—Ç: `[TYPE] SEVERITY\n\n–¢–µ–∫—Å—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è`

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º

1. **Candidate –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç** —Å–µ—Å—Å–∏—é –ø–æ —Ç–æ–∫–µ–Ω—É
2. **–í–∏–¥–∏—Ç**:
   - –ö–Ω–æ–ø–∫—É "–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π" –≤ header (–µ—Å–ª–∏ Gitea –≤–∫–ª—é—á–µ–Ω)
   - –ú–æ–∂–µ—Ç –ø–µ—Ä–µ–π—Ç–∏ –≤ Gitea –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
   - –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–¥–æ–º —á–µ—Ä–µ–∑ Gitea UI

## üìã –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ PR

```javascript
// –í ReviewerDashboard
const createGiteaPR = async (sessionId) => {
  const res = await axios.post(`/api/reviewer/sessions/${sessionId}/gitea/create-pr`)
  console.log('PR —Å–æ–∑–¥–∞–Ω:', res.data.pr_id)
  console.log('URL:', res.data.pr_url)
}
```

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

```javascript
// –í ReviewerDashboard
const syncGiteaComments = async (sessionId) => {
  const res = await axios.post(`/api/reviewer/sessions/${sessionId}/gitea/sync-comments`)
  console.log(`–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ: ${res.data.synced_count}/${res.data.total_count}`)
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ PR

```javascript
// –í ReviewerDashboard
const loadGiteaPR = async (sessionId) => {
  const res = await axios.get(`/api/reviewer/sessions/${sessionId}/gitea/pr`)
  console.log('PR:', res.data.pr)
  console.log('–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:', res.data.comments)
  console.log('Diff:', res.data.diff)
}
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1. **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –∫–æ–¥–æ–º**: –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã –≤ Gitea
2. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Git workflow**: Pull Requests, –∫–æ–º–º–∏—Ç—ã, –≤–µ—Ç–∫–∏
3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤**: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–∑ –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã –ø–æ–ø–∞–¥–∞—é—Ç –≤ Gitea PR
4. **–î–æ—Å—Ç—É–ø –¥–ª—è –∫–∞–Ω–¥–∏–¥–∞—Ç–∞**: –ö–∞–Ω–¥–∏–¥–∞—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–¥–æ–º —á–µ—Ä–µ–∑ Gitea UI
5. **–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π**: –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Git –∏—Å—Ç–æ—Ä–∏–∏

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏** –¥–ª—è –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è diff –∏–∑ PR** –≤–º–µ—Å—Ç–æ —Ñ–∞–π–ª–æ–≤–æ–≥–æ diff
3. **–î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (Gitea ‚Üí –Ω–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞)
4. **Webhook –æ—Ç Gitea** –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ PR
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ª–∏—è–Ω–∏–µ PR** –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏

