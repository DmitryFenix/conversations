# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Merge Requests

## üéØ –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç (Windows)

```powershell
.\scripts\setup_mr_database.ps1
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç (Linux/Mac/WSL)

```bash
chmod +x scripts/setup_mr_database.sh
./scripts/setup_mr_database.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:**
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω (–∑–∞–ø—É—Å–∫–∞–µ—Ç –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ API –∑–∞–ø—É—â–µ–Ω (–∑–∞–ø—É—Å–∫–∞–µ—Ç –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
3. ‚úÖ –°–æ–±–∏—Ä–∞–µ—Ç MR –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö `./artifacts/*_diff.patch`
4. ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏—Ö –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
5. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~2-3 –º–∏–Ω—É—Ç—ã

---

## üê≥ –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ Docker Compose

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL
docker compose up -d postgres

# –î–æ–∂–¥–∞—Ç—å—Å—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
sleep 5

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É
docker compose --profile setup run --rm setup-mr-db
```

---

## üìã –†—É—á–Ω–æ–π —Å–ø–æ—Å–æ–± (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å –≤—Å—ë –≤—Ä—É—á–Ω—É—é:

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL
```bash
docker compose up -d postgres
```

### 2. –°–æ–±—Ä–∞—Ç—å MR
```bash
python scripts/collect_mrs.py --artifacts ./artifacts --output mrs_collected.json
```

### 3. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
```bash
python scripts/import_mrs.py mrs_collected.json
```

---

## ‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –ù—É–∂–Ω–æ –ª–∏ —Å–æ–±–∏—Ä–∞—Ç—å MR –∫–∞–∂–¥—ã–π —Ä–∞–∑?

**–ù–µ—Ç!** –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è **–æ–¥–∏–Ω —Ä–∞–∑**:
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Å–∏—Å—Ç–µ–º—ã
- –ö–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –Ω–æ–≤—ã–µ diff —Ñ–∞–π–ª—ã –≤ `./artifacts/`
- –ö–æ–≥–¥–∞ —Ö–æ—Ç–∏—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞–±–æ—Ä MR

### –ß—Ç–æ –µ—Å–ª–∏ —É –º–µ–Ω—è –Ω–µ—Ç diff —Ñ–∞–π–ª–æ–≤ –≤ artifacts?

–°–∫—Ä–∏–ø—Ç –≤—Å—ë —Ä–∞–≤–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è, –Ω–æ —Å–æ–∑–¥–∞—Å—Ç –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª. –í—ã –º–æ–∂–µ—Ç–µ:
1. –î–æ–±–∞–≤–∏—Ç—å diff —Ñ–∞–π–ª—ã –≤ `./artifacts/` –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞
2. –°–æ–±—Ä–∞—Ç—å MR –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
   ```bash
   python scripts/collect_mrs.py --repo /path/to/repo --output mrs_collected.json
   ```

### –ú–æ–∂–Ω–æ –ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ?

–î–∞, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ `docker-compose.yml` –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å cron-–∑–∞–¥–∞—á—É, –Ω–æ –æ–±—ã—á–Ω–æ —ç—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ - MR —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î.

### –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞–±–æ—Ä MR?

–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞:
```bash
./scripts/setup_mr_database.sh
```

–û–Ω —Å–ø—Ä–æ—Å–∏—Ç, –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ª–∏ MR (–µ—Å–ª–∏ —Ñ–∞–π–ª —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç).

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   ```bash
   # Windows
   .\scripts\setup_mr_database.ps1
   
   # Linux/Mac/WSL
   ./scripts/setup_mr_database.sh
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   ```bash
   curl http://localhost:8000/api/mr/list
   ```

3. **–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MR –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–π.

---

## üí° –°–æ–≤–µ—Ç

–ï—Å–ª–∏ —É –≤–∞—Å –º–Ω–æ–≥–æ diff —Ñ–∞–π–ª–æ–≤, –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - —Å–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –∏ –≤—ã—á–∏—Å–ª—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏.




